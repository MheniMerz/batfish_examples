lab:
  description: ''
  notes: ''
  title: batfish-examples
  version: 0.2.0
links:
  - id: l0
    n1: n0
    n2: n1
    i1: i1
    i2: i1
    label: as1core1-GigabitEthernet1<->as1border1-GigabitEthernet1
  - id: l1
    n1: n0
    n2: n2
    i1: i2
    i2: i1
    label: as1core1-GigabitEthernet2<->as1border2-GigabitEthernet1
  - id: l2
    n1: n2
    n2: n5
    i1: i2
    i2: i2
    label: as1border2-GigabitEthernet2<->as3border2-GigabitEthernet2
  - id: l3
    n1: n5
    n2: n3
    i1: i1
    i2: i2
    label: as3border2-GigabitEthernet1<->as3core1-GigabitEthernet2
  - id: l4
    n1: n3
    n2: n4
    i1: i1
    i2: i1
    label: as3core1-GigabitEthernet1<->as3border1-GigabitEthernet1
  - id: l5
    n1: n8
    n2: n6
    i1: i1
    i2: i1
    label: as2core1-GigabitEthernet1<->as2border1-GigabitEthernet1
  - id: l6
    n1: n8
    n2: n7
    i1: i2
    i2: i1
    label: as2core1-GigabitEthernet2<->as2border2-GigabitEthernet1
  - id: l7
    n1: n9
    n2: n6
    i1: i1
    i2: i2
    label: as2core2-GigabitEthernet1<->as2border1-GigabitEthernet2
  - id: l8
    n1: n9
    n2: n7
    i1: i2
    i2: i2
    label: as2core2-GigabitEthernet2<->as2border2-GigabitEthernet2
  - id: l9
    n1: n6
    n2: n1
    i1: i3
    i2: i2
    label: as2border1-GigabitEthernet3<->as1border1-GigabitEthernet2
  - id: l10
    n1: n7
    n2: n4
    i1: i3
    i2: i2
    label: as2border2-GigabitEthernet3<->as3border1-GigabitEthernet2
  - id: l11
    n1: n8
    n2: n10
    i1: i3
    i2: i1
    label: as2core1-GigabitEthernet3<->as2dist1-GigabitEthernet1
  - id: l12
    n1: n8
    n2: n11
    i1: i4
    i2: i1
    label: as2core1-GigabitEthernet4<->as2dist2-GigabitEthernet1
  - id: l13
    n1: n9
    n2: n10
    i1: i3
    i2: i2
    label: as2core2-GigabitEthernet3<->as2dist1-GigabitEthernet2
  - id: l14
    n1: n9
    n2: n11
    i1: i4
    i2: i2
    label: as2core2-GigabitEthernet4<->as2dist2-GigabitEthernet2
  - id: l15
    n1: n10
    n2: n12
    i1: i3
    i2: i1
    label: as2dist1-GigabitEthernet3<->as2dept1-GigabitEthernet1
  - id: l16
    n1: n11
    n2: n12
    i1: i3
    i2: i2
    label: as2dist2-GigabitEthernet3<->as2dept1-GigabitEthernet2
  - id: l17
    n1: n12
    n2: n13
    i1: i3
    i2: i0
    label: as2dept1-GigabitEthernet3<->host1-eth0
  - id: l18
    n1: n12
    n2: n14
    i1: i4
    i2: i0
    label: as2dept1-GigabitEthernet4<->host2-eth0
  - id: l19
    n1: n15
    n2: n16
    i1: i0
    i2: i0
    label: oob-mgmt-switch-port0<->wan-connection-to-sandbox-port
  - id: l20
    n1: n15
    n2: n0
    i1: i1
    i2: i8
    label: oob-mgmt-switch-port1<->as1core1-GigabitEthernet8
  - id: l21
    n1: n15
    n2: n1
    i1: i2
    i2: i8
    label: oob-mgmt-switch-port2<->as1border1-GigabitEthernet8
  - id: l22
    n1: n15
    n2: n2
    i1: i3
    i2: i8
    label: oob-mgmt-switch-port3<->as1border2-GigabitEthernet8
  - id: l23
    n1: n15
    n2: n8
    i1: i4
    i2: i8
    label: oob-mgmt-switch-port4<->as2core1-GigabitEthernet8
  - id: l24
    n1: n15
    n2: n9
    i1: i5
    i2: i8
    label: oob-mgmt-switch-port5<->as2core2-GigabitEthernet8
  - id: l25
    n1: n15
    n2: n6
    i1: i6
    i2: i8
    label: oob-mgmt-switch-port6<->as2border1-GigabitEthernet8
  - id: l26
    n1: n15
    n2: n7
    i1: i7
    i2: i8
    label: oob-mgmt-switch-port7<->as2border2-GigabitEthernet8
  - id: l27
    n1: n15
    n2: n10
    i1: i8
    i2: i8
    label: oob-mgmt-switch-port8<->as2dist1-GigabitEthernet8
  - id: l28
    n1: n15
    n2: n11
    i1: i9
    i2: i8
    label: oob-mgmt-switch-port9<->as2dist2-GigabitEthernet8
  - id: l29
    n1: n15
    n2: n12
    i1: i10
    i2: i5
    label: oob-mgmt-switch-port10<->as2dept1-GigabitEthernet5
  - id: l30
    n1: n15
    n2: n13
    i1: i11
    i2: i4
    label: oob-mgmt-switch-port11<->host1-eth4
  - id: l31
    n1: n15
    n2: n14
    i1: i12
    i2: i4
    label: oob-mgmt-switch-port12<->host2-eth4
  - id: l32
    n1: n15
    n2: n3
    i1: i13
    i2: i8
    label: oob-mgmt-switch-port13<->as3core1-GigabitEthernet8
  - id: l33
    n1: n15
    n2: n4
    i1: i14
    i2: i8
    label: oob-mgmt-switch-port14<->as3border1-GigabitEthernet8
  - id: l34
    n1: n15
    n2: n5
    i1: i15
    i2: i8
    label: oob-mgmt-switch-port15<->as3border2-GigabitEthernet8
nodes:
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as1core1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      logging host 1.1.1.1
      logging host 2.2.2.2
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 1.10.1.1 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.10 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet1
        ip address 1.0.1.2 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 1.0.2.2 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 1.10.1.1
      network 1.0.0.0 0.255.255.255 area 1
      !
      router bgp 1
      bgp router-id 1.10.1.1
      bgp log-neighbor-changes
      neighbor as1 peer-group
      neighbor as1 remote-as 1
      neighbor 1.1.1.1 peer-group as1
      neighbor 1.1.1.1 update-source Loopback0
      neighbor 1.2.2.2 peer-group as1
      neighbor 1.2.2.2 update-source Loopback0
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        neighbor as1 send-community
        neighbor as1 route-reflector-client
        neighbor as1 advertise additional-paths all
        neighbor 1.1.1.1 activate
        neighbor 1.2.2.2 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n0
    image_definition: null
    label: as1core1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -1160
    y: 160
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as1border1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      !
      interface Loopback0
      ip address 1.1.1.1 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.11 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet1
        ip address 1.0.1.1 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 10.12.11.1 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 1.1.1.1
      redistribute connected subnets
      passive-interface Loopback0
      network 1.0.0.0 0.255.255.255 area 1
      !
      router bgp 1
      bgp router-id 1.1.1.1
      bgp log-neighbor-changes
      neighbor as1 peer-group
      neighbor as1 remote-as 1
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor as3 peer-group
      neighbor as3 remote-as 3
      neighbor xanadu peer-group
      neighbor xanadu remote-as 555
      neighbor bad-ebgp peer-group
      neighbor bad-ebgp remote-as 666
      neighbor 1.10.1.1 peer-group as1
      neighbor 1.10.1.1 update-source Loopback0
      neighbor 3.2.2.2 peer-group bad-ebgp
      neighbor 5.6.7.8 peer-group xanadu
      neighbor 10.12.11.2 peer-group as2
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        network 1.0.1.0 mask 255.255.255.0
        network 1.0.2.0 mask 255.255.255.0
        neighbor as1 send-community
        neighbor as1 advertise additional-paths all
        neighbor as2 send-community
        neighbor as2 route-map as2_to_as1 in
        neighbor as2 route-map as1_to_as2 out
        neighbor as3 send-community
        neighbor as3 route-map as3_to_as1 in
        neighbor as3 route-map as1_to_as3 out
        neighbor 1.10.1.1 activate
        neighbor 3.2.2.2 activate
        neighbor 5.6.7.8 activate
        neighbor 10.12.11.2 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded as1_community permit _1:
      ip community-list expanded as2_community permit _2:
      ip community-list expanded as3_community permit _3:
      !
      no ip http server
      no ip http secure-server
      !
      !
      ip prefix-list default_list seq 5 permit 0.0.0.0/0
      !
      ip prefix-list inbound_route_filter seq 5 deny 1.0.0.0/8 le 32
      ip prefix-list inbound_route_filter seq 10 permit 0.0.0.0/0 le 32
      access-list 101 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 101 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 102 permit ip host 2.0.0.0 host 255.0.0.0
      access-list 102 permit ip host 2.128.0.0 host 255.255.0.0
      access-list 103 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 103 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map as1_to_as2 permit 1
      match ip address 101
      set metric 50
      set community 1:2 additive
      !
      route-map as1_to_as2 permit 3
      match ip address 103
      set metric 50
      set community 1:2 additive
      !
      route-map as1_to_as2 permit 5
      match ip address prefix-list default_list
      set metric 50
      set community 1:2 additive
      !
      route-map as2_to_as1 permit 100
      match community as2_community
      set local-preference 350
      !
      route-map as1_to_as3 permit 1
      match ip address 101
      set metric 50
      set community 1:3 additive
      !
      route-map as1_to_as3 permit 2
      match ip address 102
      set metric 50
      set community 1:3 additive
      !
      route-map as3_to_as1 permit 100
      match community as3_community
      set local-preference 350
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n1
    image_definition: null
    label: as1border1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -950
    y: 50
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as1border2
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      ntp server 18.18.18.18
      ntp server 23.23.23.23
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
      ip address 1.2.2.2 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.12 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet1
        ip address 1.0.2.1 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 10.13.22.1 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet3
      ip address 10.14.22.1 255.255.255.0
      !
      router ospf 1
      router-id 1.2.2.2
      redistribute connected subnets
      network 1.0.0.0 0.255.255.255 area 1
      !
      router bgp 1
      bgp router-id 1.2.2.2
      bgp log-neighbor-changes
      neighbor as1 peer-group
      neighbor as1 remote-as 1
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor as3 peer-group
      neighbor as3 remote-as 3
      neighbor as4 peer-group
      neighbor as4 remote-as 4
      neighbor 1.10.1.1 peer-group as1
      neighbor 1.10.1.1 update-source Loopback0
      neighbor 10.13.22.3 peer-group as3
      neighbor 10.14.22.4 peer-group as4
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        network 1.0.1.0 mask 255.255.255.0
        network 1.0.2.0 mask 255.255.255.0
        neighbor as1 send-community
        neighbor as1 advertise additional-paths all
        neighbor as2 send-community
        neighbor as2 route-map as2_to_as1 in
        neighbor as2 route-map as1_to_as2 out
        neighbor as3 send-community
        neighbor as3 route-map as3_to_as1 in
        neighbor as3 route-map as1_to_as3 out
        neighbor as4 route-map as4_to_as1 in
        neighbor as4 route-map as1_to_as4 out
        neighbor 1.10.1.1 activate
        neighbor 10.13.22.3 activate
        neighbor 10.14.22.4 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded as1_community permit _1:
      ip community-list expanded as2_community permit _2:
      ip community-list expanded as3_community permit _3:
      ip community-list expanded as4_community permit _4:
      !
      no ip http server
      no ip http secure-server
      !
      !
      ip prefix-list as4-prefixes seq 1 permit 4.0.0.0/8 le 32
      !
      ip prefix-list inbound_route_filter seq 5 deny 1.0.0.0/8 le 32
      ip prefix-list inbound_route_filter seq 10 permit 0.0.0.0/0 le 32
      access-list 101 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 101 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 102 permit ip host 2.0.0.0 host 255.0.0.0
      access-list 102 permit ip host 2.128.0.0 host 255.255.0.0
      access-list 103 permit ip host 3.0.1.0 host 255.255.255.0
      !
      route-map as1_to_as2 permit 1
      match ip address 101
      set metric 50
      set community 1:2 additive
      !
      route-map as1_to_as2 permit 3
      match ip address 103
      set metric 50
      set community 1:2 additive
      !
      route-map as2_to_as1 permit 100
      match community as2_community
      set local-preference 350
      !
      route-map as1_to_as3 permit 1
      match ip address 101
      set metric 50
      set community 1:3 additive
      !
      route-map as1_to_as3 permit 2
      match ip address 102
      set metric 50
      set community 1:3 additive
      !
      route-map as3_to_as1 permit 100
      match community as3_community
      set local-preference 350
      !
      route-map as1_to_as4 permit 2
      set metric 50
      set community 1:4 additive
      !
      route-map as4_to_as1 permit 100
      match ip address prefix-list as4-prefixes
      match community as4_community
      set local-preference 350
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n2
    image_definition: null
    label: as1border2
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -960
    y: 320
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as3core1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      logging host 1.1.1.1
      logging host 2.2.2.2
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 3.10.1.1 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.30 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet2
        ip address 3.0.2.2 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet1
        ip address 3.0.1.2 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet3
        ip address 90.90.90.1 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet4
        ip address 90.90.90.2 255.255.255.0
        no shutdown
      !
      router ospf 1
      network 3.0.0.0 0.255.255.255 area 1
      !
      router bgp 3
      bgp router-id 3.10.1.1
      bgp log-neighbor-changes
      neighbor as3 peer-group
      neighbor as3 remote-as 3
      neighbor 3.1.1.1 peer-group as3
      neighbor 3.1.1.1 update-source Loopback0
      neighbor 3.2.2.2 peer-group as3
      neighbor 3.2.2.2 update-source Loopback0
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        network 3.0.1.0 mask 255.255.255.0
        network 3.0.2.0 mask 255.255.255.0
        neighbor as3 send-community
        neighbor as3 route-reflector-client
        neighbor as3 advertise additional-paths all
        neighbor 3.1.1.1 activate
        neighbor 3.2.2.2 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: as3core1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: 40
    y: 160
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as3border1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      ntp server 18.18.18.18
      ntp server 23.23.23.23
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 3.1.1.1 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.31 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet1
        ip address 10.23.21.3 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 3.0.1.1 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 3.1.1.1
      redistribute connected subnets
      network 3.0.0.0 0.255.255.255 area 1
      !
      router bgp 3
      bgp router-id 3.1.1.1
      bgp log-neighbor-changes
      neighbor as1 peer-group
      neighbor as1 remote-as 1
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor as3 peer-group
      neighbor as3 remote-as 3
      neighbor 3.10.1.1 peer-group as3
      neighbor 3.10.1.1 update-source Loopback0
      neighbor 10.23.21.2 peer-group as2
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        network 3.0.1.0 mask 255.255.255.0
        network 3.0.2.0 mask 255.255.255.0
        neighbor as1 send-community
        neighbor as1 route-map as1_to_as3 in
        neighbor as1 route-map as3_to_as1 out
        neighbor as2 send-community
        neighbor as2 route-map as2_to_as3 in
        neighbor as2 route-map as3_to_as2 out
        neighbor as3 send-community
        neighbor as3 advertise additional-paths all
        neighbor 3.10.1.1 activate
        neighbor 10.23.21.2 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded as1_community permit _1:
      ip community-list expanded as2_community permit _2:
      ip community-list expanded as3_community permit _3:
      !
      no ip http server
      no ip http secure-server
      !
      !
      ip prefix-list default_list seq 5 permit 0.0.0.0/0
      !
      ip prefix-list inbound_route_filter seq 5 deny 3.0.0.0/8 le 32
      ip prefix-list inbound_route_filter seq 10 permit 0.0.0.0/0 le 32
      access-list 101 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 101 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 102 permit ip host 2.0.0.0 host 255.0.0.0
      access-list 102 permit ip host 2.128.0.0 host 255.255.0.0
      access-list 103 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 103 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map as3_to_as1 permit 2
      match ip address 102
      set metric 50
      set community 3:1 additive
      !
      route-map as3_to_as1 permit 3
      match ip address 103
      set metric 50
      set community 3:1 additive
      !
      route-map as1_to_as3 permit 100
      match community as1_community
      set local-preference 350
      !
      route-map as3_to_as2 permit 1
      match ip address 101
      set metric 50
      set community 3:2 additive
      !
      route-map as3_to_as2 permit 3
      match ip address 103
      set metric 50
      set community 3:2 additive
      !
      route-map as3_to_as2 permit 5
      match ip address prefix-list default_list
      set metric 50
      set community 3:2 additive
      !
      route-map as2_to_as3 permit 100
      match community as2_community
      set local-preference 350
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: as3border1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -120
    y: 40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as3border2
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      ntp server 18.18.18.18
      ntp server 23.23.23.23
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 3.2.2.2 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.32 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet1
        ip address 3.0.2.1 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 10.13.22.3 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 3.2.2.2
      redistribute connected subnets
      network 3.0.0.0 0.255.255.255 area 1
      !
      router bgp 3
      bgp router-id 3.2.2.2
      bgp log-neighbor-changes
      neighbor as1 peer-group
      neighbor as1 remote-as 1
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor as3 peer-group
      neighbor as3 remote-as 3
      neighbor 3.10.1.1 peer-group as3
      neighbor 3.10.1.1 update-source Loopback0
      neighbor 10.13.22.1 peer-group as1
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        network 3.0.1.0 mask 255.255.255.0
        network 3.0.2.0 mask 255.255.255.0
        neighbor as1 send-community
        neighbor as1 route-map as1_to_as3 in
        neighbor as1 route-map as3_to_as1 out
        neighbor as2 send-community
        neighbor as2 route-map as2_to_as3 in
        neighbor as2 route-map as3_to_as2 out
        neighbor as3 send-community
        neighbor as3 advertise additional-paths all
        neighbor 3.10.1.1 activate
        neighbor 10.13.22.1 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded as1_community permit _1:
      ip community-list expanded as2_community permit _2:
      ip community-list expanded as3_community permit _3:
      !
      no ip http server
      no ip http secure-server
      !
      !
      ip prefix-list inbound_route_filter seq 5 deny 3.0.0.0/8 le 32
      ip prefix-list inbound_route_filter seq 10 permit 0.0.0.0/0 le 32
      access-list 101 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 101 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 102 permit ip host 2.0.0.0 host 255.0.0.0
      access-list 102 permit ip host 2.128.0.0 host 255.255.0.0
      access-list 103 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 103 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map as3_to_as1 permit 2
      match ip address 102
      set metric 50
      set community 3:1 additive
      !
      route-map as3_to_as1 permit 3
      match ip address 103
      set metric 50
      set community 3:1 additive
      !
      route-map as1_to_as3 permit 100
      match community as1_community
      set local-preference 350
      !
      route-map as3_to_as2 permit 1
      match ip address 101
      set metric 50
      set community 3:2 additive
      !
      route-map as3_to_as2 permit 3
      match ip address 103
      set metric 50
      set community 3:2 additive
      !
      route-map as2_to_as3 permit 100
      match community as2_community
      set local-preference 350
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n5
    image_definition: null
    label: as3border2
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -120
    y: 320
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as2border1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      ntp server 18.18.18.18
      ntp server 23.23.23.23
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 2.1.1.1 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.22 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet3
        ip address 10.12.11.2 255.255.255.0
        ip access-group OUTSIDE_TO_INSIDE in
        ip access-group INSIDE_TO_AS1 out
        speed 1000
        no shutdown
      !
      interface GigabitEthernet1
        ip address 2.12.11.1 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet2
        ip address 2.12.12.1 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 2.1.1.1
      redistribute connected subnets
      network 2.0.0.0 0.255.255.255 area 1
      !
      router bgp 2
      bgp router-id 2.1.1.1
      bgp log-neighbor-changes
      neighbor as1 peer-group
      neighbor as1 remote-as 1
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor as3 peer-group
      neighbor as3 remote-as 3
      neighbor 2.1.2.1 peer-group as2
      neighbor 2.1.2.1 update-source Loopback0
      neighbor 2.1.2.2 peer-group as2
      neighbor 2.1.2.2 update-source Loopback0
      neighbor 10.12.11.1 peer-group as1
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        aggregate-address 2.128.0.0 255.255.0.0 summary-only
        neighbor as1 send-community
        neighbor as1 route-map as1_to_as2 in
        neighbor as1 route-map as2_to_as1 out
        neighbor as2 send-community
        neighbor as2 advertise additional-paths all
        neighbor as3 send-community
        neighbor as3 route-map as3_to_as2 in
        neighbor as3 route-map as2_to_as3 out
        neighbor 2.1.2.1 activate
        neighbor 2.1.2.2 activate
        neighbor 10.12.11.1 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded as1_community permit _1:
      ip community-list expanded as2_community permit _2:
      ip community-list expanded as3_community permit _3:
      !
      no ip http server
      no ip http secure-server
      !
      ip access-list extended INSIDE_TO_AS1
      permit ip 2.0.0.0 0.255.255.255 1.0.0.0 0.255.255.255
      permit ip 10.12.11.2 0.0.0.0 10.12.11.1 0.0.0.0
      deny   ip any any
      ip access-list extended OUTSIDE_TO_INSIDE
      deny   ip 2.0.0.0 0.255.255.255 any
      deny   ip any host 2.128.1.101
      permit ip any any
      !
      !
      ip prefix-list inbound_route_filter seq 5 deny 2.0.0.0/8 le 32
      ip prefix-list inbound_route_filter seq 10 permit 0.0.0.0/0 le 32
      !
      ip prefix-list outbound_routes seq 5 permit 2.128.0.0/9 ge 16
      access-list 101 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 101 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 103 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 103 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map as2_to_as1 permit 2
      match ip address prefix-list outbound_routes
      set metric 50
      set community 2:1 additive
      !
      route-map as2_to_as1 permit 3
      match ip address 103
      set metric 50
      set community 2:1 additive
      !
      route-map as1_to_as2 permit 100
      match community as1_community
      set local-preference 350
      set community 1:2 additive
      !
      route-map as2_to_as3 permit 1
      match ip address 101
      set metric 50
      set community 2:3 additive
      !
      route-map as2_to_as3 permit 2
      match ip address prefix-list outbound_routes
      set metric 50
      set community 2:3 additive
      !
      route-map as3_to_as2 permit 100
      match community as3_community
      set local-preference 350
      set community 3:2 additive
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n6
    image_definition: null
    label: as2border1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -700
    y: -50
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as2border2
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      ntp server 18.18.18.18
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 2.1.1.2 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.23 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown
      !
      interface GigabitEthernet3
        ip address 10.23.21.2 255.255.255.0
        ip access-group OUTSIDE_TO_INSIDE in
        ip access-group INSIDE_TO_AS3 out
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 2.12.22.1 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet1
        ip address 2.12.21.1 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 2.1.1.2
      redistribute connected subnets
      network 2.0.0.0 0.255.255.255 area 1
      !
      router bgp 2
      bgp router-id 2.1.1.2
      bgp log-neighbor-changes
      neighbor as1 peer-group
      neighbor as1 remote-as 1
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor as3 peer-group
      neighbor as3 remote-as 3
      neighbor 2.1.2.1 peer-group as2
      neighbor 2.1.2.1 update-source Loopback0
      neighbor 2.1.2.2 peer-group as2
      neighbor 2.1.2.2 update-source Loopback0
      neighbor 10.23.21.3 peer-group as3
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        aggregate-address 2.128.0.0 255.255.0.0 summary-only
        neighbor as1 send-community
        neighbor as1 route-map as1_to_as2 in
        neighbor as1 route-map as2_to_as1 out
        neighbor as2 send-community
        neighbor as2 advertise additional-paths all
        neighbor as3 send-community
        neighbor as3 route-map as3_to_as2 in
        neighbor as3 route-map as2_to_as3 out
        neighbor 2.1.2.1 activate
        neighbor 2.1.2.2 activate
        neighbor 10.23.21.3 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded as1_community permit _1:
      ip community-list expanded as2_community permit _2:
      ip community-list expanded as3_community permit _3:
      !
      no ip http server
      no ip http secure-server
      !
      ip access-list extended INSIDE_TO_AS3
      permit ip 2.0.0.0 0.255.255.255 3.0.0.0 0.255.255.255
      permit ip 10.23.21.2 0.0.0.0 10.23.21.3 0.0.0.0
      deny   ip any any
      ip access-list extended OUTSIDE_TO_INSIDE
      deny   ip 2.0.0.0 0.255.255.255 any
      permit ip any any
      !
      !
      ip prefix-list inbound_route_filter seq 5 deny 2.0.0.0/8 le 32
      ip prefix-list inbound_route_filter seq 10 permit 0.0.0.0/0 le 32
      !
      ip prefix-list outbound_routes seq 5 permit 2.128.0.0/9 ge 16
      access-list 101 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 101 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 103 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 103 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map as2_to_as1 permit 2
      match ip address prefix-list outbound_routes
      set metric 50
      set community 2:1 additive
      !
      route-map as2_to_as1 permit 3
      match ip address 103
      set metric 50
      set community 2:1 additive
      !
      route-map as1_to_as2 permit 100
      match community as1_community
      set local-preference 350
      set community 1:2 additive
      !
      route-map as2_to_as3 permit 1
      match ip address 101
      set metric 50
      set community 2:3 additive
      !
      route-map as2_to_as3 permit 2
      match ip address prefix-list outbound_routes
      set metric 50
      set community 2:3 additive
      !
      route-map as3_to_as2 permit 100
      match community as3_community
      set local-preference 350
      set community 3:2 additive
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n7
    image_definition: null
    label: as2border2
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -350
    y: -50
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as2core1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      logging host 1.1.1.1
      logging host 2.1.2.2
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      interface Loopback0
        ip address 2.1.2.1 255.255.255.255
        no shutdown
      !
      interface GigabitEthernet8
        ip address 10.10.20.20 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown      !
      interface GigabitEthernet1
        ip address 2.12.11.2 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 2.12.21.2 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet3
        ip address 2.23.11.2 255.255.255.0
        ip access-group blocktelnet in
        no shutdown
      !
      interface GigabitEthernet4
        ip address 2.23.12.2 255.255.255.0
        ip access-group blocktelnet in
        no shutdown
      !
      router ospf 1
       router-id 2.1.2.1
       network 2.0.0.0 0.255.255.255 area 1
      !
      router bgp 2
       bgp router-id 2.1.2.1
       bgp log-neighbor-changes
       neighbor as2 peer-group
       neighbor as2 remote-as 2
       neighbor 2.1.1.1 peer-group as2
       neighbor 2.1.1.1 update-source Loopback0
       neighbor 2.1.1.2 peer-group as2
       neighbor 2.1.1.2 update-source Loopback0
       neighbor 2.1.3.1 peer-group as2
       neighbor 2.1.3.1 update-source Loopback0
       neighbor 2.1.3.2 peer-group as2
       neighbor 2.1.3.2 update-source Loopback0
       !
       address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        neighbor as2 send-community
        neighbor as2 route-reflector-client
        neighbor as2 advertise additional-paths all
        neighbor 2.1.1.1 activate
        neighbor 2.1.1.2 activate
        neighbor 2.1.3.1 activate
        neighbor 2.1.3.2 activate
        maximum-paths eibgp 5
       exit-address-family
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      ip access-list extended blocktelnet
       deny   tcp any any eq telnet
       permit ip any any
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n8
    image_definition: null
    label: as2core1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -700
    y: -200
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as2core2
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      logging host 1.1.1.1
      logging host 2.2.2.2
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 2.1.2.2 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.21 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown      !
      interface GigabitEthernet2
        mtu 1800
        ip address 2.12.22.2 255.255.255.0
      speed 1000
      !
      interface GigabitEthernet1
        mtu 1600
        ip address 2.12.12.2 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet4
        mtu 1700
        ip address 2.23.22.2 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet3
       ip address 2.23.21.2 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 2.1.2.2
      network 2.0.0.0 0.255.255.255 area 1
      !
      router bgp 2
      bgp router-id 2.1.2.2
      bgp log-neighbor-changes
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor 2.1.1.1 peer-group as2
      neighbor 2.1.1.1 update-source Loopback0
      neighbor 2.1.1.2 peer-group as2
      neighbor 2.1.1.2 update-source Loopback0
      neighbor 2.1.3.1 peer-group as2
      neighbor 2.1.3.1 update-source Loopback0
      neighbor 2.1.3.2 peer-group as2
      neighbor 2.1.3.2 update-source Loopback0
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        neighbor as2 send-community
        neighbor as2 route-reflector-client
        neighbor as2 advertise additional-paths all
        neighbor as3 peer-group
        neighbor as3 route-map filter-bogons in
        neighbor 2.1.1.1 activate
        neighbor 2.1.1.2 activate
        neighbor 2.1.3.1 activate
        neighbor 2.1.3.2 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n9
    image_definition: null
    label: as2core2
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -350
    y: -200
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as2dist1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 2.1.3.1 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.24 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown      !
      interface GigabitEthernet1
        ip address 2.23.11.3 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 2.23.21.3 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet3
        ip address 2.34.101.3 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 2.1.3.1
      redistribute connected subnets
      network 2.1.0.0 0.0.255.255 area 1
      network 2.23.0.0 0.0.255.255 area 1
      !
      router bgp 2
      bgp router-id 2.1.3.1
      bgp log-neighbor-changes
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor dept peer-group
      neighbor dept remote-as 65001
      neighbor 2.1.2.1 peer-group as2
      neighbor 2.1.2.1 update-source Loopback0
      neighbor 2.1.2.2 peer-group as2
      neighbor 2.1.2.2 update-source Loopback0
      neighbor 2.34.101.4 peer-group dept
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        neighbor as2 send-community
        neighbor as2 advertise additional-paths all
        neighbor dept send-community
        neighbor dept route-map dept_to_as2dist in
        neighbor dept route-map as2dist_to_dept out
        neighbor 2.1.2.1 activate
        neighbor 2.1.2.2 activate
        neighbor 2.34.101.4 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded dept_community permit _65001:
      !
      no ip http server
      no ip http secure-server
      !
      access-list 102 permit ip host 2.128.0.0 host 255.255.0.0
      access-list 105 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 105 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 105 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 105 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map as2dist_to_dept permit 100
      match ip address 105
      set metric 50
      set community 2:65001 additive
      !
      route-map dept_to_as2dist permit 100
      match community dept_community
      set local-preference 350
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n10
    image_definition: null
    label: as2dist1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -700
    y: -350
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as2dist2
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 2.1.3.2 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.25 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown      !
      interface GigabitEthernet2
        ip address 2.23.22.3 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet1
        ip address 2.23.12.3 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet3
        ip address 2.34.201.3 255.255.255.0
        no shutdown
      !
      router ospf 1
      router-id 2.1.3.2
      redistribute connected subnets
      network 2.1.0.0 0.0.255.255 area 1
      network 2.23.0.0 0.0.255.255 area 1
      !
      router bgp 2
      bgp router-id 2.1.3.2
      bgp log-neighbor-changes
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor dept peer-group
      neighbor dept remote-as 65001
      neighbor 2.1.2.1 peer-group as2
      neighbor 2.1.2.1 update-source Loopback0
      neighbor 2.1.2.2 peer-group as2
      neighbor 2.1.2.2 update-source Loopback0
      neighbor 2.34.201.4 peer-group dept
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        neighbor as2 send-community
        neighbor as2 advertise additional-paths all
        neighbor dept send-community
        neighbor dept route-map dept_to_as2dist in
        neighbor dept route-map as2dist_to_dept out
        neighbor 2.1.2.1 activate
        neighbor 2.1.2.2 activate
        neighbor 2.34.201.4 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded dept_community permit _65001:
      !
      no ip http server
      no ip http secure-server
      !
      access-list 102 permit ip host 2.128.0.0 host 255.255.0.0
      access-list 105 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 105 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 105 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 105 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map as2dist_to_dept permit 100
      match ip address 105
      set metric 50
      set community 2:65001 additive
      !
      route-map dept_to_as2dist permit 100
      match community dept_community
      set local-preference 350
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n11
    image_definition: null
    label: as2dist2
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -350
    y: -350
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      !
      hostname as2dept1
      !
      lldp run
      netconf-yang
      username mheni privilege 15 secret mheni
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      no ip icmp rate-limit unreachable
      !
      !
      no ip domain lookup
      ip domain name lab.local
      !
      !
      multilink bundle-name authenticated
      !
      !
      ip tcp synwait-time 5
      !
      !
      interface Loopback0
        ip address 2.1.1.2 255.255.255.255
      !
      interface GigabitEthernet8
        ip address 10.10.20.26 255.255.255.0
        description TO_MGMT_SWITCH
        no shutdown      !
      interface GigabitEthernet1
        ip address 2.34.101.4 255.255.255.0
        speed 1000
        no shutdown
      !
      interface GigabitEthernet2
        ip address 2.34.201.4 255.255.255.0
        no shutdown
      !
      interface GigabitEthernet3
        ip address 2.128.0.1 255.255.255.0
        ip access-group RESTRICT_HOST_TRAFFIC_IN in
        no shutdown
      !
      interface GigabitEthernet4
        ip address 2.128.1.1 255.255.255.0
        ip access-group RESTRICT_HOST_TRAFFIC_IN in
        no shutdown
      !
      router bgp 65001
      bgp router-id 2.1.4.1
      bgp log-neighbor-changes
      neighbor as2 peer-group
      neighbor as2 remote-as 2
      neighbor 2.34.101.3 peer-group as2
      neighbor 2.34.201.3 peer-group as2
      !
      address-family ipv4
        bgp dampening
        bgp additional-paths select all
        bgp additional-paths send receive
        network 2.128.0.0 mask 255.255.255.0
        network 2.128.1.0 mask 255.255.255.0
        neighbor as2 send-community
        neighbor as2 route-map as2_to_dept in
        neighbor as2 route-map dept_to_as2 out
        neighbor 2.34.101.3 activate
        neighbor 2.34.201.3 activate
        maximum-paths eibgp 5
      exit-address-family
      !
      ip forward-protocol nd
      !
      ip bgp-community new-format
      ip community-list expanded as2_community permit _2:
      !
      no ip http server
      no ip http secure-server
      !
      ip access-list extended RESTRICT_HOST_TRAFFIC_IN
      permit ip 2.128.0.0 0.0.255.255 any
      deny   ip any any
      permit icmp any any
      ip access-list extended RESTRICT_HOST_TRAFFIC_OUT
      permit ip any 2.128.0.0 0.0.255.255
      deny   ip 1.128.0.0 0.0.255.255 2.128.0.0 0.0.255.255
      deny   ip any any
      !
      access-list 102 permit ip host 2.128.0.0 host 255.255.255.0
      access-list 102 permit ip host 2.128.1.0 host 255.255.255.0
      access-list 105 permit ip host 1.0.1.0 host 255.255.255.0
      access-list 105 permit ip host 1.0.2.0 host 255.255.255.0
      access-list 105 permit ip host 3.0.1.0 host 255.255.255.0
      access-list 105 permit ip host 3.0.2.0 host 255.255.255.0
      !
      route-map dept_to_as2 permit 100
      match ip address 102
      set metric 50
      set community 65001:2 additive
      !
      route-map as2_to_dept permit 100
      match community as2_community
      set local-preference 350
      !
      !
      !
      control-plane
      !
      !
      line con 0
        exec-timeout 0 0
        privilege level 15
        logging synchronous
        stopbits 1
      line vty 0 4
       login
       transport input ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n12
    image_definition: null
    label: as2dept1
    node_definition: csr1000v
    ram: 3096
    tags: []
    x: -500
    y: -500
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
      - id: i5
        label: GigabitEthernet5
        slot: 4
        type: physical
      - id: i6
        label: GigabitEthernet6
        slot: 5
        type: physical
      - id: i7
        label: GigabitEthernet7
        slot: 6
        type: physical
      - id: i8
        label: GigabitEthernet8
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration: |-
      # this is a shell script which will be sourced at boot
      hostname inserthostname_here
      # configurable user account
      USERNAME=cisco
      PASSWORD=cisco
      # no password for tc user by default
      TC_PASSWORD=
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n13
    image_definition: null
    label: host1
    node_definition: server
    ram: null
    tags: []
    x: -650
    y: -600
    interfaces:
      - id: i0
        label: eth0
        slot: 0
        type: physical
      - id: i1
        label: eth1
        slot: 1
        type: physical
      - id: i2
        label: eth2
        slot: 2
        type: physical
      - id: i3
        label: eth3
        slot: 3
        type: physical
      - id: i4
        label: eth4
        slot: 4
        type: physical
  - boot_disk_size: null
    configuration: |-
      # this is a shell script which will be sourced at boot
      hostname inserthostname_here
      # configurable user account
      USERNAME=cisco
      PASSWORD=cisco
      # no password for tc user by default
      TC_PASSWORD=
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n14
    image_definition: null
    label: host2
    node_definition: server
    ram: null
    tags: []
    x: -350
    y: -600
    interfaces:
      - id: i0
        label: eth0
        slot: 0
        type: physical
      - id: i1
        label: eth1
        slot: 1
        type: physical
      - id: i2
        label: eth2
        slot: 2
        type: physical
      - id: i3
        label: eth3
        slot: 3
        type: physical
      - id: i4
        label: eth4
        slot: 4
        type: physical
  - boot_disk_size: null
    configuration: ums-9f5e1101-af
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n15
    image_definition: null
    label: oob-mgmt-switch
    node_definition: unmanaged_switch
    ram: null
    tags: []
    x: -520
    y: 120
    interfaces:
      - id: i0
        label: port0
        slot: 0
        type: physical
      - id: i1
        label: port1
        slot: 1
        type: physical
      - id: i2
        label: port2
        slot: 2
        type: physical
      - id: i3
        label: port3
        slot: 3
        type: physical
      - id: i4
        label: port4
        slot: 4
        type: physical
      - id: i5
        label: port5
        slot: 5
        type: physical
      - id: i6
        label: port6
        slot: 6
        type: physical
      - id: i7
        label: port7
        slot: 7
        type: physical
      - id: i8
        label: port8
        slot: 8
        type: physical
      - id: i9
        label: port9
        slot: 9
        type: physical
      - id: i10
        label: port10
        slot: 10
        type: physical
      - id: i11
        label: port11
        slot: 11
        type: physical
      - id: i12
        label: port12
        slot: 12
        type: physical
      - id: i13
        label: port13
        slot: 13
        type: physical
      - id: i14
        label: port14
        slot: 14
        type: physical
      - id: i15
        label: port15
        slot: 15
        type: physical
  - boot_disk_size: null
    configuration: bridge0
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n16
    image_definition: null
    label: wan-connection-to-sandbox
    node_definition: external_connector
    ram: null
    tags: []
    x: -520
    y: 240
    interfaces:
      - id: i0
        label: port
        slot: 0
        type: physical
annotations:
  - border_color: '#808080FF'
    border_radius: 25
    border_style: ''
    color: '#486B7C2C'
    thickness: 2
    type: rectangle
    x1: -1280.0
    y1: 0.0
    x2: 440.0
    y2: 360.0
    z_index: 0
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: true
    text_content: AS1
    text_font: monospace
    text_italic: false
    text_size: 18
    text_unit: pt
    thickness: 1
    type: text
    x1: -1240.0
    y1: 320.0
    z_index: 1
  - border_color: '#808080FF'
    border_radius: 25
    border_style: ''
    color: '#96D4D653'
    thickness: 2
    type: rectangle
    x1: -200.0
    y1: 0.0
    x2: 400.0
    y2: 360.0
    z_index: 0
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: true
    text_content: AS2
    text_font: monospace
    text_italic: false
    text_size: 18
    text_unit: pt
    thickness: 1
    type: text
    x1: -760.0
    y1: -600.0
    z_index: 1
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: true
    text_content: AS3
    text_font: monospace
    text_italic: false
    text_size: 18
    text_unit: pt
    thickness: 1
    type: text
    x1: 120.0
    y1: 320.0
    z_index: 1
  - border_color: '#808080FF'
    border_radius: 25
    border_style: ''
    color: '#A3C7AA3C'
    thickness: 2
    type: rectangle
    x1: -800.0
    y1: -640.0
    x2: 560.0
    y2: 680.0
    z_index: 0

